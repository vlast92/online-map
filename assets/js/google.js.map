{"version":3,"sources":["../../dist/js/google.js"],"names":["GoogleMap","params","map","google","maps","Map","document","getElementById","id","center","centerCoord","zoom","zoomControl","mapTypeControl","streetViewControl","fullscreenControl","markerConfig","marker","infoWindow","info_window","InfoWindow","close","markers","addPlace","i","window","setTimeout","addMarker","addMarkerListeners","index","infoWindowContent","length","push","Marker","position","animation","icon","title","name","addListener","setZoom","setCenter","getPosition","undefined","console","log","open","setContent","getAnimation","setAnimation","Animation","BOUNCE","addControl","controls","createElement","classList","add","class","innerHTML","content","ControlPosition","clearMarkers","setMap"],"mappings":"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","file":"google.js","sourcesContent":["\"use strict\";\r\n\r\nfunction GoogleMap(params){\r\n\r\n    const map = new google.maps.Map(document.getElementById(params.id), {\r\n        center: params.centerCoord,\r\n        zoom: params.zoom,\r\n        zoomControl: params.zoomControl,\r\n        mapTypeControl: params.mapTypeControl,\r\n        streetViewControl: params.streetViewControl,\r\n        fullscreenControl: params.fullscreenControl\r\n    }),\r\n    markerConfig = params.marker;\r\n\r\n    let infoWindow = null;\r\n\r\n    if(params.info_window) {\r\n        infoWindow = new google.maps.InfoWindow({map: map});\r\n        infoWindow.close();\r\n    }\r\n\r\n    let markers = [];\r\n\r\n    this.addPlace = (params) => {\r\n\r\n        for(let i = 0; i < params.length; i++){\r\n            window.setTimeout(()=>{\r\n\r\n                this.addMarker(params[i]);\r\n                this.addMarkerListeners({index: i, infoWindowContent: params[i].infoWindowContent});\r\n            }, 500 * (i + 1));\r\n        }\r\n    };\r\n    this.addMarker = (params) => {\r\n\r\n        markers.push(new google.maps.Marker({\r\n            position: params.position,\r\n            animation: markerConfig.animation,\r\n            icon: markerConfig.icon,\r\n            title: params.name,\r\n            map: map\r\n        }));\r\n    };\r\n    this.addMarkerListeners = (params) => {\r\n\r\n        markers[params.index].addListener('click', function () {\r\n            map.setZoom(16);\r\n            map.setCenter(this.getPosition());\r\n\r\n            if(infoWindow !== null && params.infoWindowContent !== undefined){\r\n                console.log(\"params.infoWindowContent \", params.infoWindowContent)\r\n                infoWindow.close();\r\n                infoWindow.open(map, this);\r\n                infoWindow.setContent(params.infoWindowContent);\r\n            }\r\n\r\n            if (this.getAnimation() !== null) {\r\n                this.setAnimation(null);\r\n            } else {\r\n                this.setAnimation(google.maps.Animation.BOUNCE);\r\n            }\r\n\r\n            this.setAnimation(google.maps.Animation.BOUNCE);\r\n        });\r\n        markers[params.index].addListener('rightclick', function () {\r\n\r\n            if(infoWindow !== null){\r\n                infoWindow.close();\r\n            }\r\n            map.setZoom(7);\r\n            map.setCenter(this.getPosition());\r\n        });\r\n    };\r\n    this.addControl = (params) => {\r\n\r\n        let controls = document.createElement('div');\r\n\r\n        controls.classList.add(params.class);\r\n        controls.innerHTML = params.content;\r\n\r\n        map.controls[google.maps.ControlPosition[params.position]].push(controls);\r\n    };\r\n    this.clearMarkers = () => {\r\n\r\n        for(let i = 0; i < markers.length; i++){\r\n\r\n            markers[i].setMap(null);\r\n        }\r\n        markers = [];\r\n    };\r\n    \r\n    /** открываем функции и переменные, назначая их свойствам объекта */\r\n    return {\r\n        addControl: this.addControl,\r\n        addPlace: this.addPlace,\r\n        clearMarkers: this.clearMarkers\r\n    };\r\n}"]}
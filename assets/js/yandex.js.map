{"version":3,"sources":["../../dist/js/yandex.js"],"names":["YandexMap","params","map","ymaps","Map","id","center","centerCoord","zoom","controls","wheel_zoom","behaviors","disable","addPlace","i","length","icon","placemark","Placemark","position","lat","lng","hintContent","name","balloonContent","infoWindowContent","geoObjects","add","addPlacesFromData","objectManager","ObjectManager","clusterize","gridSize","cluster","grid_size","pie_chart","clusters","options","set","radius","core_radius","stroke_width","icon_color","$","ajax","url","data_path","done","data","addControl","control","SearchControl","size","provider"],"mappings":"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","file":"yandex.js","sourcesContent":["\"use strict\";\r\n\r\nfunction YandexMap(params) {\r\n\r\n    const map = new ymaps.Map(params.id, {\r\n        center: params.centerCoord,\r\n        zoom: params.zoom,\r\n        controls: []\r\n    });\r\n\r\n    if(!params.wheel_zoom) map.behaviors.disable('scrollZoom');\r\n\r\n    this.addPlace = (params) => {\r\n\r\n        for(let i = 0; i < params.length; i++){\r\n\r\n            let icon = params[i].icon ? params[i].icon : {},\r\n                placemark = new ymaps.Placemark([params[i].position.lat, params[i].position.lng],{\r\n                hintContent: params[i].name,\r\n                balloonContent: params[i].infoWindowContent\r\n            }, icon);\r\n            map.geoObjects.add(placemark);\r\n        }\r\n    };\r\n\r\n    this.addPlacesFromData = (params) => {\r\n        const objectManager = new ymaps.ObjectManager({\r\n            // Чтобы метки начали кластеризоваться, выставляем опцию.\r\n            clusterize: true,\r\n            // ObjectManager принимает те же опции, что и кластеризатор.\r\n            gridSize: params.cluster.grid_size,\r\n        });\r\n\r\n        // Чтобы задать опции одиночным объектам и кластерам,\r\n        // обратимся к дочерним коллекциям ObjectManager.\r\n        //objectManager.objects.options.set('preset', 'islands#greenDotIcon');\r\n\r\n        if(params.cluster.pie_chart){\r\n            // Макет метки кластера pieChart.\r\n            objectManager.clusters.options.set('clusterIconLayout', 'default#pieChart');\r\n            // Радиус диаграммы в пикселях.\r\n            if(params.cluster.pie_chart.radius) objectManager.clusters.options.set('clusterIconPieChartRadius', params.cluster.pie_chart.radius);\r\n            // Радиус центральной части макета.\r\n            if(params.cluster.pie_chart.core_radius) objectManager.clusters.options.set('clusterIconPieChartCoreRadius', params.cluster.pie_chart.core_radius);\r\n            // Ширина линий-разделителей секторов и внешней обводки диаграммы.\r\n            if(params.cluster.pie_chart.stroke_width) objectManager.clusters.options.set('clusterIconPieChartStrokeWidth', params.cluster.pie_chart.stroke_width);\r\n        }\r\n\r\n        if(params.cluster.icon_color) objectManager.clusters.options.set('clusterIconColor', params.cluster.icon_color);\r\n\r\n        map.geoObjects.add(objectManager);\r\n\r\n        $.ajax({\r\n            url: params.data_path\r\n        }).done(function(data) {\r\n            objectManager.add(data);\r\n        });\r\n    };\r\n\r\n    this.addControl = (params) => {\r\n\r\n        switch (params) {\r\n            case \"search_control\":\r\n                map.controls.add(new ymaps.control.SearchControl({\r\n                    options: {\r\n                        // Пусть элемент управления будет\r\n                        // в виде поисковой строки.\r\n                        size: 'large',\r\n                        // Включим возможность искать\r\n                        // не только топонимы, но и организации.\r\n                        provider: 'yandex#search'\r\n                    }\r\n                }));\r\n                break;\r\n            default:\r\n                map.controls.add(params);\r\n        }\r\n    };\r\n\r\n    /** открываем функции и переменные, назначая их свойствам объекта */\r\n    return {\r\n        addControl: this.addControl,\r\n        addPlace: this.addPlace,\r\n        addPlacesFromData: this.addPlacesFromData,\r\n        /*clearMarkers: this.clearMarkers*/\r\n    };\r\n}"]}